@model IEnumerable<TrabajadoresPrueba.Repositories.TrabajadorVm>
@{
}

<div class="tbl-container" style="font-size:.81rem;">
    <h2 class="text-center fw-bold fs-6 mb-5">Listado de Trabajadores</h2>

    <button type="button" class="btn btn-primary mb-4" data-bs-toggle="modal" data-bs-target="#modalAddTrabajador">
        Nuevo Registro
    </button>

    <table class="table table-bordered">
        <tr>
            <th>Tipo Documento</th>
            <th>Número Documento</th>
            <th>Nombres</th>
            <th>Sexo</th>
            <th>Departamento</th>
            <th>Provincia</th>
            <th>Distrito</th>
            <th class="text-center">Acción</th>
        </tr>

        @foreach (var trabajador in Model)
        {
            <tr>
                <td>@trabajador.TipoDocumento</td>
                <td>@trabajador.NumeroDocumento</td>
                <td>@trabajador.Nombres!.ToUpper()</td>
                <td>@trabajador.Sexo</td>
                <td>@trabajador.Departamento</td>
                <td>@trabajador.Provincia</td>
                <td>@trabajador.Distrito</td>
                <td class="d-flex justify-content-between">
                    <button type="button" data-id="@trabajador.Id" class="btn btn-warning py-0 px-4" data-bs-toggle="modal" data-bs-target="#modalEditTrabajador">
                         Editar
                     </button>
                    <a href="/Trabajador/Delete?id=@trabajador.Id" id="btnEliminar" onclick="return window.confirm('Está seguro de eliminar el registro?')" class="btn btn-danger py-0 px-4">
                        Eliminar
                    </a>
                </td>
            </tr>
        }
    </table>
</div>

<div class="modal fade" id="modalAddTrabajador" tabindex="-1" role="dialog" aria-labelledby="modalAddTrabajadorLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalAddTrabajadorLabel">Creación Trabajador</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalEditTrabajador" tabindex="-1" role="dialog" aria-labelledby="modalEditTrabajadorLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalEditTrabajadorLabel">Actualizar Trabajador</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            $('#modalAddTrabajador').on('show.bs.modal', function () {
                var modal = $(this);
                modal.find('.modal-body').load('@Url.Action("Add", "Trabajador")');
            });
        });

        $(document).ready(function() {
            $('#modalEditTrabajador').on('show.bs.modal', function (event) {
                var button = $(event.relatedTarget);
                var id = button.data('id');
                var modal = $(this);

                modal.find('.modal-body').load('@Url.Action("Edit", "Trabajador")' + '?id=' + id);
            });
        });
    </script>
}